

### 摘要

当代移动机器人技术的发展已经推动了一系列相关技术的进步。其中就包括语义建图，它能提供对空间的抽象和人机交流的手段。最近语义建图的各种引入和发展催生了这篇文章，文中对现有方法进行了明确地分析。对几种算法按照各自的主要特征(即可扩展性、推断模型、时间一致性和拓扑地图的使用情况)进行了分类。语义地图相关的应用也在文章开头进行了概述，主要强调人机交互、认知表达和规划能力。文中还详细讨论了目前公开可用的、适合用于评估语义建图技术的验证集和基准测试。最后，尝试探讨了开放性问题的解决方案。

### 关键词

移动机器人，语义地图，拓扑地图，时间一致性，对象识别，地点识别，人机交互，认知表达，规划

### 隐喻

以居住在村庄的村民的角度来看，一个当地村民凭借（过往）习惯来知道自己（要走的）路，所以可以不假思索的走到村庄的教堂、市政厅、商店，然后再回家。但是，当他被要求绘制或者咨询他的村庄地图时，他面临着学习一种新的、不同类别的任务：一种需要使用指南针和测量单元（的任务）。最初可以用当地简要印象（snapshots）的个人术语所理解的东西，现在必须用制图者的通用术语来考虑。由（村民）习惯得来的村庄知识，使他能够把一个外村人（stranger）从一个地点带到另一个地点。这与要求他（根据）完美的通用、中性术语来告诉该外村人如何去其中的任何一个地点，或者实际上，如何理解这些地点与其他村庄的关系是完全不同的。

¬ Gilbert Ryle ‘‘Abstractions’

### 一、引言

​	   上面的引喻被逻辑地理学的创造者用来解释该术语(逻辑地理学)[1]。但是今天的机器人专家已经意识到，他们面临着与当地村民相似的问题，或者说恰恰相反的问题。如今，人们可能会认为，SLAM问题已经被解决了，但这一过程(SLAM)的输出只有当人们使用指南针和测量单元的时候才能使用。因此，移动机器人的行为就像机器制图师，他们无法与当地村民（即人类居民）交流，这些村民是凭借习惯来在自己的环境中导航的。相应的，现有大多数建图方法致力于构建一个关于机器人工作环境的全局一致的**度量地图**。这些机器人配备了最先进的仪器，一方面可以构建地图，另一方面可以确定自己相对地图的定位，从而以惊人的精度确定自己的全局位姿。基于这种能力，机器人可以规划一条路径并朝着一个目标前进，该目标也应该位于全局地图参考框架中的某个特定度量位置（即目标点应在所建地图范围内）。**然而**， 要让机器人像人类那样理解环境，从而能带领一个陌生人从一个地方到另一个地方，需要一种完全不同的技能，它不同于任何几何地图所能提供的技能。未来的机器人应当具备以人类为中心的术语来理解周围环境的能力，即能够辨别房间和走廊的不同，或者能区分厨房和客厅的不同功能。因此，通过涉及人类(认知)概念(如房间、物体的类型，以及它们的空间布局)的语义属性来形成扩充地图，被视为未来机器人的必备属性，这些机器人应被设计为能在人类居住的环境中运作。（意思就是，人类凭借经验和习惯而产生的导航能力无法直接转换成机器人建图所需的精确、一致的方位和距离，而机器人所建立的精确、一致的度量地图同样也无法直接转换成可以像本地村民一样进行人类层面导航能力）。

​	   语义建图为该问题提供了一种解决方案，它提供了关于机器人周围环境的定性描述，这些描述旨在增强机器人的导航能力、任务规划能力以及弥补人机交互(HRI)方面的缺陷（gap），参见[2-4]。特别是[4]的工作，通过使用自然语言解决了以HRI为重点的语义建图，从而为机器人与人类的社交提供了最直接的方式。因此，语义建图是一个蓬勃发展的前沿领域，催生了几篇博士论文[5,6]。单词semantic起源于希腊词*σ ηµαντ ικ* oς，代表意义，它另一方面又起源于动词*σ ηµα*`*ινϵιν* ，意思是表示(signify)，它又依次来源于名词*σ* ηµα，即sign。就像这样，语义学与符号和符号所指的事物之间的研究有关，这就是它们的意义。后者面向识别两个或多个实体之间彼此交互、动作和处理的方式[7]。因此，**语义建图的目标**是：当机器人在人类居住的区域中漫游时，识别和记录含有对人类而言有意义的信号与标志。

因此，语义地图是一种对环境的增强表示，它同时包含几何信息和高层次的定性特征。通过人工智能体对自身环境的语义感知能力，和对学习到的空间记忆的精确回忆能力，可以建立人类和机器人之间基本的通信联系。因此，对于一次成功的HRI，机器人必须保持对空间的认知解释能力，即它们应该涉及有关物体和所遇到地点的语义属性，并将这些属性与对周围环境的几何感知建立联系。此外，存在于客观环境中的语义信息也需要以人工智能体可以恰当感知和表示它所处的环境的方式组织起来。组织所有这些信息(语义+几何)的最合适的方法就是使用地图，即语义地图。

由于现代机器人是通过计算自身在度量地图中的位姿来实现在所处环境中的导航，文献中发表的大量语义建图方法都采取了在度量地图上添加语义信息的方式[2-4]。因此，语义地图包含了高层次的特征，这些特征建模了人类关于地点、物体、形状甚至所有这些对象之间关联的概念，而（底层的）度量地图则保留了机器人应该了解的所有几何特征，以实现在周围环境中的安全导航。然而，应该进一步指出的是，语义建图领域已经发表了一些工作，但这些工作没有使用度量地图去确定地点的类型，特别是使用视觉的情况下[8,9]。

![image-20210909111547103](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210909111547103.png)

	<center> Fig.1 语义建图方法的分类法。请注意，度量地图被认为是语义地图的互补属性。</center>

​		本篇综述的目的在于，提供有关语义建图的深刻理解，研究其中包含的不同组件，对相关文献进行分类，提供在移动机器人领域可能的应用，以及最后，引出可用于基准测试的方法和数据库。为了支撑这一目标，本文尝试对现有建图策略进行了基于质量的分类，分类应该突出这些方法保有的主导属性。在Fig.1中对语义建图方案所包含的最常见组件的分类做出了说明性的表示。这些主要特征构成了生成完整语义地图所应该满足的条件。特征之一是用来对观测到的场景进行推理的模式，场景中包含易于区分不同方法丰富度的元素。特别是许多方法只使用单一信号(cue)（如物体）来推断一个地点，而一些其他方法则利用多个信号(cue)（如物体、地点和形状等）来产生关于一个区域的语义线索。在许多语义建图技术中频繁出现的另一特征是这种地图所展现的时间一致性，这使得它在执行高级活动（如任务规划或HRI）时非常实用。典型语义建图方案所拥有的另一种重要属性是存在各自的拓扑地图，这是根据图对探索环境的一种抽象。这种图的节点以几何方式组织起来，以便于同时保存关于探索场景的概念认知。这些图既可以是只保留几何特征的无约束图，也可以根据他们所包含的语义属性拥有多个约束。探索环境（室内或室外）的2D或3D度量图是作为一个互补组件而存在，它经常用于补充由语义学方法实现的属性。根据每种方法被扩展的尺度，度量地图既可以是一个单独场景，也可以是一个渐进创建的地图，即位姿分别以局部或全局坐标系作参考。

### 二、 发展历程

​       在应用于机器人导航的几种模式中，视觉占据主导地位。这主要是因为学者们能够将自己基于视觉的导航经验直接复制到他们的实验机上。[10]中对基于视觉的机器人导航的前二十年进行了综述。这项工作是在十多年前进行的，它得出的结论是，尽管当时（2002年）对将移动机器人从一个坐标发送到另一个坐标积累了足够的专业知识，但仍不足以执行功能/任务驱动地导航，例如从大厅内的某个地方找到并带回一个灭火器。此外，这篇文章还认为，如果机器人在一个导航范式中需要意识到它所要操作对象的意义，那么这种导航范式是笨重、难以处理的。对于这种导航情况的任何解决方案都需要和计算机视觉的整体问题相关联，即自动场景解释。参考Kuipers的先驱性工作[11-13]，在过去的十年中引入了几种语义建图和导航方案，以期填补这一空白。当然，为了让机器人能够高效地导航，必须建立一个一致的几何地图。因此，我们可以说，除非事先在SLAM领域取得进展，否则在语义建图领域不会取得任何进展。在过去的几十年间，人们在各自领域里都进行了大量艰苦的研究，这些研究在移动机器人导航和建图领域取得了显著的成果[14]。为了精确定位自身[15,16]，移动机器人构建了其工作环境空间布局的一致表示。在[14,17-19]中描述的代表性工作，证明了准确表示机器人周围环境与开发高效建图方法的必要性。更准确地说，SLAM为这一问题提供了解决方案。通过SLAM，被放置在未探索区域中任意未知地点的移动机器人都可以逐步建立一个环境一致的地图，同时确定自己在地图中的位置。为了寻找该问题的有效解决方案，已经进行了一些成功的研究尝试，它们的分析总结被发表在一篇综述中 [20,21] (该综述分成了两个part发表)。

![image-20210909151416837](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210909151416837.png)

<center>Fig. 2. (a)探索的室内环境的2D度量地图实例，(b)对应的拓扑地图和(c)混合拓扑-度量地图，其中拓扑地图中的每个节点都登记在占用网格的特定空间区域。</center>

​		然而，要想更深入地理解SLAM，需要进一步分解问题。根据环境感知方式，尝试对现有的几何建图方案进行分类，可以分成三类，即度量、拓扑和拓扑-度量建图。**度量建图**由一种几何表示构成，其中每个位姿都与一个全局坐标系严格相关。这通常表现为一幅3D或2D占用网格，能满足机器人的精确定位。此外，**拓扑建图**涉及到一张（拓扑）图，图中的每个节点都对应真实环境中的一个不同地点[22,23]，例如放置于车厢门上方的地铁地图。同一场景的度量地图和拓扑地图分别如Fig.2(a)和Fig.2(b)所示。最新的方法是**拓扑-度量建图**，它由拓扑和度量建图的组合构成，正如Fig.2(c)所展示的那样。该方法有助于实现更加快速、精确地机器人定位。该方法早期引入了一种结合了度量和拓扑地图的拓扑-度量方法，旨在重构连续-离散混合状态空间中的机器人路径[24]。在最近的一个方案中，SLAM问题是通过结合视觉回环检测与测量信息(来源于实时生成的、关于未知环境的拓扑-度量地图)来解决的[25]。尽管迄今为止所开发的所有方法都被证明足以支持机器人导航到特定的目标位置，但它们缺乏适合于典型环境中作业的高层级属性。因此，(研究内容)转向构建具有认知能力的、以人类为中心的地图是不可避免的。因此，机器人的当代(技术)趋势是设计在人类环境中行为接近生物的智能体。

### 三、 语义地图构建趋势

#### 3.1 基于规模的分类

![image-20210909152444271](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210909152444271.png)

<center>Fig.3. 基于规模分类的图形化表示。</center>

​		由于在许多情况下，语义地图都是建立在度量地图之上的，因此可以基于底层方法保留的规模(即度量地图的规模)对现有技术进行简单的分类。因此，语义建图范式已经被应用于室内和室外情况，此外，为室内场景开发的方案还被进一步划分为单一场景和大规模场景两种。单一场景类涉及的方法，可以根据局部坐标系推断实例框架，还能提供有关场景中被观测对象的概念属性。此外，大规模方法逐步构建一个关于全局坐标系的度量地图，同时还标注了高层级特征，如对象类别、地点标签和形状解释。关于室外方案，值得注意的是几乎没有任何单一场景的方法。对文献中发表的方法按照规模进行了分类，总结的结果如Fig.3所示，其中值得注意的是，大规模室内情况占据了大部分研究内容。

##### 3.1.1 室内单一场景解释

<img src="https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210909153040949.png" alt="image-20210909153040949" style="zoom:50%;" />

<center>Fig.4. 室内单一场景解释的一个实例[33]</center>

​		Nielsen等人[26]将语义建图近似为机器人和人类之间的接口。他们引入了单帧快照应用作为一种捕获真实世界照片并存储他们方法，以此扩展度量地图。特别是地图的改进是通过图标或符号来完成的，从而提供了地点和感兴趣物体的意义。在Kostavelis等人提出的早期工作[27]中，一种基于SVM的记忆算法被用于语义推断场景的可遍历性。由于语义推理被局部路径规划算法进一步利用，该项工作适用于灾后的室内环境。[28]中描述的方法利用了立体视觉，并且在图像平面上进行操作，以对场景的可遍历性进行分类。值得注意的是，这项工作在室内和室外都表现出卓越的性能。Rusu等人[29]提出了一种室内机器人，它配备有一个立体相机和一个SICK激光扫描仪，能够对厨房内的物体进行推断。该方法通过融合各种传感器输入来获取所感知环境的基本信息，同时机器人还能从示范中学习。Viswanathan等人[30,31]提出了一种利用LabelMe数据集[32]来解决视觉位置识别问题的方案。LabelMe数据集是一个由用户注释图像组成的在线数据库。在LabelMe中，用户可以通过选择一个多边形区域，并将其与适当的标签相关联来标注图像中的物体。在近期的工作中，Trevor等人[33]通过RGB-D数据引入了利用关联组件实践的单一场景点云分割。首先，对点云数据进行平面分割，以区分场景中的主平面。然后，在彩色图向上应用基于L2范数的聚类和关联组件标记蒙版，以检测桌面上的物体，如Fig.4所示。Swadzba等人[34]引入了适用于单个场景分类的空间3D特征向量，该向量作用于预先捕获的帧。在另一项单一场景解释工作中，Mozos等人[35]使用了微软Kinect传感进行视觉地点分类。此外，[36]的作者还利用视觉输入来推断在机器人探索过程中被检测到的物体的类别标签。对这条信息进行分层融合处理，以进一步根据现有对象刻画观测到的场景。

##### 3.1.2 室内大规模场景解释

![image-20210909153410465](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210909153410465.png)

<center>Fig.5. 一个室内场景解释的实例[40]，其中对可使用物体进行了标注</center>

​		考虑到室内大规模场景解释方法，人们可以根据传感器和构建度量地图所用的策略来进行划分。因此，文献[37-41]采用了安装在移动机器人上的激光扫描仪来重建三维环境。更具体地说，Nüchter等[37]利用了SICK激光扫描仪来捕获场景的360°地图。通过语义标签建立连续获取的点云的对应关系，然后通过迭代最近点（ICP）算法进行配准，以获得全局一致的地图。Blodow等[38]以类似的方式，利用逐渐获得的激光扫描（点云）与2D-3D配准程序结合来形成度量地图。分割技术被用于产生关于物体意义的初始假设，例如家具抽屉和门。Rusu等[39,41]通过处理大型输入数据集，并提取相关物体，扩展了几何地图。被建模的物体是专用于厨房场景的，如电器、橱柜、桌子和抽屉等，它们对于家庭助理机器人而言具有特殊意义。[40]中使用了结合旋转单元和里程计估计的Hokuyo UTM-30LX测量，来构建探索环境的3D地图。基于特征的地图包含水平表面（如桌子、架子或柜台等）的位置信息，这些表面是在3D点云中被检测到的，如Fig.5所示，其中代表性平面区域以不同颜色显示。此外，Trevor等[42]利用GTSAM方法生成了探索环境的度量地图。该方法定义了可用于SLAM和语义建图的各种特征类型。在一个对探索环境生成语义推断的群体机器人范式中，[43]的作者利用激光扫描仪生成了一幅3D度量地图。

![image-20210909153612689](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210909153612689.png)

<center>Fig.6. 室内大规模解释的一个实例[3]</center>

 		[3,44]中描述的方法都采用RGB-D传感器来获取环境的3D地图。在[3]中，采用分层策略创建了一个全局一致的3D度量地图。首先，使用视觉测程法对连续获取的点云进行合并，然后基于主导平面ICP配准进行细化。接着，采用结合SVM的特征袋技术对多个不相似地点进行精准识别，如Fig.6所示。第二种基于RGB-D的方法[44]采用了SLAM6D工具包将下级点云注册到一致的全景点云中。

​        与[40]类似，基于特征的地图采用了不同类型的家具及其位姿，而在这种情况下，通过家具各自的计算机辅助设计（CAD）模型，可以进一步增强效果。Civera等[45]采用单目SLAM算法来创建所感知环境的度量地图。该算法并行地运行基于EKF的单目SLAM和对象识别线程，并利用该线程对场景进行语义标注。

​        另一类室内大规模语义建图方法是利用激光扫描仪生成2D占用网格建模，以探索环境。Mozos等[46]利用了两个装配有SICK激光扫描仪的不同机器人，利用CARMEN软件模拟不同地图中的激光扫描。此外，该方法使用AdaBoost将从距离数据提取出的简单特征增强为强分类器。进一步地，在[2,48,49,4]中提取了激光距离扫描的几何基元，然后应用EKF来整合特征测量结果。[50]中，作者采用一个装配有2D激光扫描仪的机器人，根据标准SLAM方法，构建了环境的占用网格，并将其作为构建语义模型的基础。所有这些方法所使用的几何特征都是线，它通常对应于墙壁和其它在激光扫描仪所处高度以线段形式出现的直线结构。[2]中使用了一种图模型表示语义信息并实现了推理，而在[48]中则是使用了基于SVM的线索整合机制实现推理的。[49]中，利用有关现有物体的局部和全局信息来扩充/增强所生成的地图。Zender等[4]以类似的方式分别通过激光和视觉数据来识别地点和物体，以增强所构建的度量地图。此外，[51]捕获激光扫描来检测地图中的转换，然后在回环检测规则下将其合并到全局度量地图中。最近，Luperto等[52]利用背靠背放置的激光扫描仪来覆盖机器人周围360°的区域。然后在探索区域的语义划分过程中使用这个度量地图。Pronobis等[43]提出了一种结合多种视觉与几何信息的多层语义建图算法。利用M空间特征表示构建度量地图。

​		相同室内类别的进一步分类包括利用立体视觉获取场景深度信息的研究工作，这些深度信息随后被用于解决SLAM问题，从而获得全局一致的度量地图[54,55]。具体地，[54]中由SLAM生成的地图利用对象标签进行扩充/增强，这些标签是通过SIFT特征识别的。而在[55]中，通过在带有文本标签（如房间号和办公人员姓名）的办公室环境中引入文本检测来对基于SLAM的地图进行扩展。此外，Nieto-Granda等人[51]利用内置于ROS中的SLAM建图模块（基于Rao-Blackwellized粒子滤波器技术），通过高斯模型将生成的地图划分成带标记的区域。Feng等[58]提出了一种室内环境下移动机器人定位框架，其中使用了单应性和匹配等概念，这些概念来源于立体图像检索技术和基于内容的图像检索技术。[59]中的工作利用视觉SLAM系统来创建一个大范围度量地图，其中包含了机器人在移动过程中观测到的不同特征的3D位置。

​        最后，值得一提的是，还有大量只关注语义建图问题本身的其它论文，因此他们直接利用文献中现有的度量地图[60-63]。作者在[60]中提出了一种利用贝叶斯推理提取地图平面轮廓的方法，该方法产生了一个定义于抽象的环境的概率生成模型。这项工作还增加了基于规则的上下文知识推理。Galindo等[61]通过所谓的概念层次（其中的两个一般类别是物体和房间）方法对于语义知识进行编码。Fasola和Mataric[63]提出了一种允许服务机器人通过自然语言与人类交流的方法，朝着这个方向，他们还提出了一个空间介词(prepositions)的语义场模型，该模型可以表示动态空间关系。在[64]中，作者以类似的方式假定了进行过相应缩放的环境的CAD模型，然而，他们利用机器人轨迹对探索过的区域进行语义标注。在[62]中，通过使用可穿戴反射视觉系统生成了室内环境的语义拓扑地图。

##### 3.1.3 室外解释

![image-20210909154208059](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210909154208059.png)

<center>Fig.7. 室外语义建图重构的一个实例[69]</center>

​		为了应对室外场景语义建图问题，已经提出了多种方法。其中一些工作在开环方式下推断观测场景的语义属性。[28]中描述的方法利用立体视觉，并且在图像平面上进行操作，以对场景的可遍历性进行分类。[65]中提出的方法利用多个传感器来分析场景的基本元素，如地面、植被、结构、障碍等。在[66]所引入的一种更复杂的方法中，作者对环境进行了大规模3D建图。更确切地说，通过使用作用于立体图像的条件随机场，对街道级图像进行了自动标记。同时，还将估计的标签进行了聚类，进而以鲁棒的方式对3D体积进行注释。此外，在[67]中，作者将有监督多类高斯过程(GP)分类应用于3D点云数据，以此处理场景的语义解释。更具体地，先对3D点云进行特征提取和分割，然后将特征向量喂给通过GP表示的隐函数。其中，GP是分类器的核。该方法的主要优点是，当3D点云变得更稠密时，已分类场景物体的不确定性会减少。Steder等[68]提出了一种基于3D距离数据的算法，适用于可靠地检测环境中曾访问过的地方，并且同时计算对应帧之间的精确变换。它将用于回环检测的词袋(BoW)模型和基于点特征的相对位姿估计结合起来，以生成环境的一致度量地图。该方法在地面和空中载具上均取得了显著效果。类似地，在[69]中，通过直接分割帧来生成街道图像的语义标签。然后将输出结果与多个连续帧聚合，以生成一个大规模语义地图，如Fig.7所示。Singh和Kosecka[70]利用瓢虫多相机系统对街景图像进行远距离语义建图。他们用各自的标签将室外场景集中到特定区域。他们还引入了一种信息特征来表征感知环境的布局，同时训练了一个分类器来识别城市中心场景中的十字路口。在[71]所述的方法中，利用无人机(UAV)根据地面观测进行语义推理。更具体地，设计了一种在线梯度增强算法来交互解释背景依赖检测器，对车载相机图像进行视频域自适应的方法中会使用该检测器。Katsura等[72]提出了一种具有对象识别属性的、基于视觉的室外导航方法。该系统的一大创新在于，识别部分在面对天气和季节变化时能保持鲁棒。作者提出了一种比较方法：机器人首先使用允许外观变化的对象模型识别图像中的对象，然后将学到的识别结果和目标图像进行比较，以此获得了很好的泛化能力。

#### 3.2 拓扑地图

​       度量地图以几何方式组织，因此有利于表示空间信息，而相关的概念信息仍然是隐藏的。揭示隐藏信息的一种方法是将其组织成拓扑图，即一张这样的图：图中的顶点和边分别对应位置和位置间的路径。拓扑地图这个属于来源于拓扑学，一个研究形状和空间的数学分支，特别是研究空间在连续变形下保持不变的属性。因此，通过拓扑地图的方式，环境应该被构建得既能够保留曾访问地点的分布的几何信息，也能够保留关于它们所属类别的概念信息。因此，这样的图构成了语义建图的基本特征之一，因为它们能同时抽象度量地图和概念信息。此外，拓扑地图既可以是无约束的(保留空间和语义特征)，也可以根据其语义属性（如当前访问地点的不确定性，或者建图区域间的转换可行性）处理多种约束(如Fig.1所示)。

![image-20210910104816264](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910104816264.png)

<center>Fig.8 与度量地图相关联的环境的拓扑地图(包含概率性断言)</center>

​		对于无约束拓扑地图，只要机器人走了一定距离或推理机制收敛到特定类标签，就将该节点添加到地图中。[61]中引入了一种层级式语义建图方法，它通过抛锚(anchoring)建立空间和语义信息之间的联系。此外，[51]在度量地图的顶层构建了拓扑图。图中的每个顶点都代表一个语义结构或标签，例如一个房间或走廊，而边代表一个过渡点，例如连接两个语义实体的门口。这种方法利用通道检测(passage detection)，试图区分探索的地点。Ranganathan和Dellaert[9]利用对象识别来形成具有度量信息的对象地图。Viswanathan等[73]在该工作的基础上进一步开发出一种识别具有特定地点标签(如“客厅”)的对象的技术。这些对象在空间排列上的聚类产生了一个图，图中的节点对应着对房间的记忆。在[74]中提出了一个类似的架构，尽管如此，注释地点的界限(limits)并不统一。类似这个概念，Nieto-Granda等[56]将空间自动识别和分类作用于单独语义(高斯)区域，并使用这种信息来生成环境的拓扑地图。Vasudevan等[54]提出了一种基于对象的分层概率空间表示。在这项工作中，提出了一种以对象图作为局部地图的地点全局拓扑表示方法。这些工作的先驱是[2,48,53,75,76]，在这些先驱工作中，赋予了拓扑图概率断言（assertion)，从而形成了更直观的语义地图，如Fig.8所示。此外，[3]中介绍了一种语义注释的拓扑图，它同时依赖几何和认知约束来区分具有相同标签的多个房间。[77]中提出构建保留全局地标(landmark)的语义地图，这种全局地标类似于人类认知导航机制中的地标。

​       对于有约束拓扑地图而言，他们通常通过导航图进一步抽象。后者(导航图)是语义注释拓扑图的概念表示，描述了被探索地点之间的连通性和过渡可行性。Mozos和Burgard[78]提出了这种近似，该近似提出了一种将探索地点的语义信息和拓扑地图结合起来的方法。具体而言，Adaboost被用作一种有监督学习算法，用于将度量地图分类到语义类(如走廊、房间等)中。之后，采用概率分割步骤来剔除分类错误，并通过结合几何和语义知识来得到拓扑地图。该地图以一种图的形式表达出来，图中的节点和边分别对应于语义标注的区域和它们之间的连接。此外，在[46]中作者采用了隐马尔可夫模型(HMM)对拓扑图中的节点进行语义推理。除此之外，在[4,49,79]中，还利用机器人轨迹，将度量线图转换为稀疏导航图。每个节点都遵循特定的几何约束被剔除，同时它还具有特定的地点标签。门和通道包含有特定的节点，而整个地图由更高层次的导航图中推导出的标签进一步抽象。最后，在一个更现代的工作[80]中引入了一种稀疏拓扑地图，图中每个节点都带有一个位置标签。HMMs还用于构建增强导航图，图中保留了在机器人探索过程中被识别地点的物理约束连通信息。

​       此外，在一个室外场景中[70]，作者展示了不同语义概念的证据/线索是如何诱导/产生出实用的、可以辅助导航和定位任务的环境拓扑表示的。在[62]中介绍的范式中，作者采用可穿戴折反射系统，通过对公式化马尔可夫模型进行分组，来对拓扑地图进行语义标记。

#### 3.3. 时间一致性

![image-20210910105131085](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105131085.png)

<center>Fig.9. (a)叠加在机器人轨迹上的拓扑图，其中轨迹被表示为现存节点间的最小生成树；(b)归一化时间调整矩阵，图中根据它们(指量化中心)的类标签和不同组之间的过渡对量化中心的划分进行了标注。图源[80]</center>

​		时间一致性是各种语义建图方法中的另一个共同属性。既可以在度量地图的构建过程中考虑时间一致性，也可以在模型的概念公式化(formulation,即用数学描述出来)过程中考虑它。Ranganathan在[81]中提出了利用时间一致性的模型概念公式化的范式。（具体来说，）作者介绍了基于图像序列分割的地点标注(PLISS)方法，它具有两种主要属性：(i)直接对视频流进行操作，以利用帧的时间临近性和推理场景的语义属性；(ii)对没有可用先验知识的地点进行检测的能力。在这项工作中，利用GP分类器来进行地点建模，并进一步利用产生的不确定性来检测具有未知标记的地点。变动点检测(change point detection)是通过将多元随机波利亚(Polya)测量模型的投影应用到低维空间实现的，可以同时保证速度与精度。这里有一种适用于语义建图的纯地点识别方法[82]值得一提，因为它采用整合了时间属性的BoW。请记住，机器人获取的帧具有较大的时间临近性，这样的方法可以提高机器人导航期间的地点识别性能。此外，在[38]中描述的一个例子中，在全局度量地图的点云标注期间，使用了时间差配准来分割出家具朝向的正面。此外，Cadena等[83]引入了一种检测视觉记忆时间一致性的系统，以收敛于回环检测，从而促进了鲁棒度量建图。另一方面，由于在单个点/视角获取的信息几乎无法提供足够的证据来实现对地点或物体的可靠分类，因此在[2,48]描述的方法中支持所开发的系统应该拥有对(获取信息的在)空间和时间(维度上)进行整合的能力。因此，在学习机制的推理过程中，这些工作都考虑了投票操作。在另一项不同的工作中[62]，作者利用概率模型下的地点标记结果来解释/说明机器人轨迹上的时间一致性。在[46,80]中，以一种更复杂的方式使用了HMM，从而记录探索地点间的时间临近性/接近度和物理过渡性/空间连通性。具体来说，在[80]中，在两个阶段利用了时间临近性：(i)在系统推理当前访问的地点期间，考虑观测帧的邻域/相邻帧；(ii)在机器人从一个特定识别地点前进到下一个地点的过程中，从而产生一个物理约束增强的导航图。通过时间邻接矩阵，Fig.9中可视化地展示了时间临近性。此外，Kostavelis等[84]在机器人运动过程中利用了所获取帧的时间临近性。沿着这个方向(继续研究)，可以确定一个时间窗口，在该窗口内执行SVM推理模式期间的投票流程来标记观测到的场景。

#### 3.4. 基于线索的感知

![image-20210910105237028](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105237028.png)

<center>Fig.10. 基于线索类型的感知</center>

​		语义建图方法的一个原始意图是用人类符号来表示周围环境。也就是说，这种方法利用了地点和物体的识别与分类领域的大量研究，这些研究产生了显著的结果，如[85,86]中描述的那样。这些调查得出的解决方案足以应用于真正的机器人，以提高它们的导航和建图能力。当代的建图算法具有地点和物体识别能力，使得他们能对观测到的场景作出结论。这一事实包含了语义建图问题的基本解决方案，并且开发的方法可能会整合单个或多个线索以获得更加一致的解决方案。根据所使用线索的类型，语义建图的分类概述如Fig.10所示。

##### 3.4.1. 单线索推理

​		在这一类中，我们收集了所有具有同一特征的方法，即它们都基于单一感知元件/成分(如地点、区域或物体)来对环境要素进行推理。这种元件的输出通常用于标注机器人所观测到的区域。根据传感器输入和采用的(系统)架构，这类方法可以进一步被细分为基于场景标注和基于像素级点云标注两种，如Fig.10所示。初步的结论是：像素级点云标注方法可以直接识别出一个地点，尽管它们利用了由各个感知机制捕获的充足信息。因此，它们必须以一种更加拟人化/类人化的方式来记忆知识，即物体的类型、特征和功能等。

​       **场景注释：**到目前为止提出的许多工作中，地点识别都被用作语义增强度量地图的唯一属性。Pronobis等[8]提出了一种基于视觉信息的地点识别判别方法。在SVM辅助下，一个全局描述符直接作用于机器人获得的图像上，产生了有意义的基于外观的解释。该方法在机器人平台上运行，并在室内场景中进行了测试，(测试表明该方法)在地点识别问题上产生了显著的结果。朝着相同的方向，在[87]中作者将SVM的一种增量扩展和能够减少建立决策函数所需的支持向量数目的方法相结合，并且没有任何性能损失。此外，在[83]中提出了一个立体视觉地点识别算法，该算法同时考虑了图像中感兴趣点的外观和几何信息。通过比较CRF来解决回环验证问题，这是算法的重点。在[35]中，作者将深度和彩色图像变换为局部二值模式直方图，其维度根据统一的标准被进一步控制。在有监督方式下，同时在SVM和随机森林上测试了这些直方图的性能，结果证明其足以支持显著地点识别。Wang等[64]专注于开发一种特定描述符来对地点进行视觉辨识。该描述符通过凸包Census变换将图像特征和彩色信息整合起来，该变换之后会被用于SVM的有监督训练。该方法适用于室内场景，并使用广角相机拍摄的图像。Feng等[63]从对比图像中提取兴趣点，以提供图像内容的感知一致测量。通过对机器人在互相关下的行为进行建模来做图像匹配，从而确定兴趣点的对应关系，然后(通过)RANSAC单应性优化准则(进一步筛选)。Fazl-Ersi和Tsotsos[88]利用方向统一模式直方图，提供了强大的判别能力，并可以以竞争方式解决地点识别问题。在[59]中，作者提出了一种利用相机图像信息在预构建地图中标记区域的方法。该方法标记的是相机图像中可见的区域而不仅仅是当前的机器人位置。可见场景的标记被整合进一个CRF中，该CRF还考虑了邻接(关系)和地点边界。此外，在[3]中，推荐了一种新的基于外观的方向直方图方法，以解决地点分类问题。相同的解决方案在[80]中也被用于地点分类任务，以构建语义注释的拓扑地图，该地图利用了机器人探索过程中产生标签的时间一致性。在一个户外场景中，Weiss和Biber[89]对场景做了粗略的分析，以构建可用于地点分类的特征。该方法被证明能够用预定义的地点类型对观测场景进行语义标注。在面向群体机器人的方法中[90]，作者提出了一种将目标地点自动分配给单个机器人的解决方案。他们采用通过AdaBoost方法学习的分类器来确定机器人应该去的地点的类型，该分类器还考虑了附近位置之间的空间依赖性。在拓扑-度量和语义地图中使用群体机器人进行探索的问题也被Cowley等在[43]中解决了。在这项工作中，高度杂乱的环境会干扰那些仅依赖于 占用网格边界识别 和 以几何特征为关键的分类方法 的探索策略。

![image-20210910105348485](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105348485.png)

<center>Fig.11 通过将有意义的对象标签分配到地图中的各个位置，实现度量地图和对象识别相结合的示例：(a)史宾机器人(robosapien)训练时期的数据样例；(b)探索环境的视图；(c)生成的地图，图中对三个物体(□篮球，◇垃圾箱，▽史宾机器人)及其各自被观测到的位置进行了标注 </center>

​		关于对象识别，一个简单的技术是在[49]中实现的，旨在构建一个机器人，它能够在度量地图上定位自己的位置、识别(行进)道路上的物体、并将其分配到地图上。在一个更复杂的方法中[91]，作者开发了一个由显著性注意模型支持的对象识别算法。具体来说，为了在现实世界场景中成功地进行识别，他们将peripheral–foveal视觉方法、自下而上的视觉显著性与立体结构和度量地图相结合。在计算图上的对象识别过程的结果如Fig.11所示。在[54]中，提出了一种基于对象的分层概率空间表示。采用了一种基于SIFT的对象识别系统，同时使用立体相机捕获对象、获取其在度量地图中的坐标。Ranganathan和Dellaert[9]提出了一个使用对象作为基本表示单元的地点模型。利用立体距离数据计算对象的3D位置。此外，采用了Swendsen-Wang算法(一种马尔可夫链、蒙特卡洛聚类方法)来解决图像特征与对象间的匹配问题。Jebari等[92]利用BoW检测和识别场景中的各种障碍。当一个对象被识别后，它就与所构建的语义地图相关联。此外，Civera等[45]采用了一种对象识别策略，该策略通过搜索SURF匹配并检查它们的几何兼容性来告知序列中存在一个对象。被识别的对象被插入到度量地图上测定的精确位置上，并因此(可以)在随后的帧中通过SLAM算法进行细化。

​       [69]分析了一种在室外场景下，根据多视角街景图像生成语义地图的方法。用对象标签(如车、人行道、建筑等)对街道图像进行了增强，进而生成语义地图。它首先利用CRF来对每一帧的图像分割建模，然后将分割的部分组合到定义于地平面上的一组连续图像上。此外，Swadzba等[34]引入了3D空间特征向量，即Gist特征，它被发现适用于单独场景分类。在一个更通用/一般的模型中，[72]中的作者提出在机器人导航过程中，通过表征基于均匀化变化的检测区域，对诸如天空、建筑、地面等实体进行识别，这样即使在不同的天气条件下也能实现鲁棒。

​       **像素级点云注释：**这类方法具有对排列好的点云进行语义划分和标记的共同特点，其中点云要么直接从激光扫描仪或RGB-D相机获得，要么根据立体图像计算得到。在各种情况下，3D信息都可以按比例放大，以便于机器人定位。Trevor等[33]专注于检测放置在桌面上的物体，但这种方法保留了观测场景的退化语义信息。Nüchter等[37]将获取的3D激光扫描结果和语义特征进行匹配。用语义信息标注3D点的基本思想是利用相邻点之间的梯度来区分地板点、物体点和天花板点三类。然后，这些特征被用于连续圆周扫描(数据)的精确配准。在[39,41]中，重点研究了厨房环境中3D点云数据的语义对象标注。假设了厨房的大部分表面是平面，因此3D点云被分割成平面。计算出的几何特征进一步用于通过CRF实现的对象类别学习。在类似的工作中[40]，引入了基于特征的建图技术，包含有地图上水平面的位置信息。产生的表面扫描结果被分析和分割成不同的表面，其中可能包含单个表面在多次扫描中的测量结果。在[50]中作者提出了一种利用贝叶斯推理从典型网格地图中提取抽象平面图的方法。通过这一过程，揭示了在抽象概念上定义的、环境的概率生成模型。采用多步RANSAC对点云集进行过分割，而搜索对象的匹配遵循几何约束。Günther等[44]引入了一个基于RGB-D的系统来重建点云中的表面、检测不同类型的家具以及估计它们的位姿。结果是生成了关于环境的一致网格表示，同时还利用检测到的家具的CAD模型对网格表示进行了丰富。在[55]中，使用了霍夫森林(随机决策回归树的一种变体)来实现像素级分类和对3D对象的位置和方向进行投票。Cadena和Košecka[93]将室内环境解析/划分为地面、结构、家具和道具四类。因此，他们将场景中遇到的实例划分为对象和非对象类别。同样，该方法也是基于CRF实现的语义分割。

<img src="https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105504735.png" alt="image-20210910105504735" style="zoom:50%;" />

<center>Fig.12. 室外语义建图重构中像素级点云标注的示例：最上方用相关的类标签描述了稠密3D语义重建(结果)；中间展示了稠密表面重建，而下面则是其中一幅输入图像[66]</center>

​		在过去，一些集中于室外场景的研究使用了像素级点云注释技术。例如Wolf和Sukhatme[94]结合SVM与HMM来生成地形地图和基于活动的地图。对获得的点云根据其可导航性进行分割和注释。此外，[71]中介绍的工作包括无人机采集数据的语义建图。一旦创建了度量地图，就会调用一组针对特定目标而设计、使用在线梯度增强的分类器。这些分类器几何上适用于机载相机图像域，并被发送回飞行无人机。另一种室外场景[95](中)利用立体图像对生成稠密深度地图。反过来，使用来自立体视觉里程计的相机位姿，将这些深度图组合到全局3D重建中。与此同时，使用非参数场景分析方法的2D语义分割也被融合到3D模型中。在类似的方法中[66]，深度地图(由跨时间的立体对生成)以在线方式融合到一个全局3D体中，以适应任意长的图像序列。使用利用立体图像的CRF策略自动对街面图像进行标记，同时对标记估计值进行合并以标注3D体积，如Fig.12所示。

##### 3.4.2 多线索推理

![image-20210910105549525](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105549525.png)

<center>Fig.13. 一幅标注有线索(语义标签)的度量地图，其中线索是从张贴在墙上的标志中读取的[55]</center>

​		虽然在前一段中提到的许多技术都依赖单线索推理，但也有足够数量的应用利用了多线索所来得出语义结论。这些方法要么结合了不同(感知)模式来理解机器人的周围环境，要么利用相同传感器输入的多种感知方法来对观测场景进行推理。现有的方法结合了人的概念，如地点、物体的类型，甚至这两者的几何，导致了度量地图增加了语义信息。[96]中描述了一种利用视觉数据来产生用于语义地点识别的多线索的方法的例子。(文中)提出了一种迁移学习策略，它使机器人能自主决定其内部知识是否对一个没有先验信息的地点有效。Krishnan和Krishna[51]采用了两种不同的(感知)模式来产生语义线索，即2D激光扫描和彩色图像。激光扫描可以探测所探索区域中的过渡区域，而彩色图像则是通过BoW机制来进行地点注释和回环检测。在一些论文[73,76]中，同时使用了视觉地点和物体识别(出现频率)以构建一个空间语义模型。具体而言，在[76]中作者使用语义地图来搜索基于计划规则下的记忆对象。Viswanathan等[30,31]结合图像的局部和全局特征，对观测场景进行语义推理。这是一种以对象为中心的方法，融合了室内场景中的全局属性，并在地点识别中取得了良好效果。除此之外，Ko等[77]利用地点分类和对象匹配技术构建了一致的语义地图。几何信息也被用于增加被检测对象间的空间关系。Trevor等[42]通过使用各种特征类型作为地标来生成语义地图，所采用的特征类型包括平面如墙、桌子和置物架，以及物体如门标志。这项工作还调查了这些地标可以被人类选择性标记以供之后参考的方面。此外，Blodow等[38]利用激光数据首先提取厨房环境中平面相关的几何信息，然后推理有组织点云内的物体标签。此外，在[74]中尝试建立起机器人传感器、对象和地点之间的联系。它采用了一种地点分类算法，该算法在物体识别算法的辅助下，通过朴素贝叶斯分类器增强关于地点的语义知识。类似地，Anand等[97]提出了一种对基于RGB-D数据的3D点云进行语义标记和搜索(的方案)。对于RGB-D数据的情况，Kostavelis等[84]利用视觉词汇进行地点识别，利用分层时间网络结合注意力模型进行对象识别。在决策算法下，这两种线索被融合到一起，从而对机器人所处位置进行语义推理。该方法利用2D图像来检测对象，并利用相应的深度数据得到其形状信息。[55]中讨论的方法侧重于创建带有文本数据的语义地图，包括房间号、人名和其他与房间和办公室相关的书面/文字描述。机器人捕获走廊的图片，并查询训练好的文本检测器来对图像区域进行分类。通过使用深度数据，将检测到的标志以特定方向放置在度量地图中(参见Fig.13)。此外，在[36]中，作者引入了一种生成概率分层模型，其中对象类别分类器用于将低级视觉特征与对象相关联，上下文关系(contextual relations)用于将对象与地点相关联。通过使用3D距离传感器提高了检测精度，该传感器允许开发的注意力机制成功地回忆起几何和结构信息。在更复杂的工作中，如[2,48,79]中所述，作者利用多传感器来推理场景的不同特征。例如，地点和物体识别是通过视觉进行的，而房间的形状则是利用激光扫描仪提取的。所有保留的概念(即前边提取到的概念信息)在广义SVM模型下进行融合，以生成关于探索区域的概率推理。Pronobis等[53]也使用了类似的策略来构建语义地图，图中包含了环境中物体的存在性信息，以及有关空间拓扑和语义属性的知识，如房间尺寸、形状和一般外观。在另一项研究中，Luperto等[52]假设机器人作业所处的建筑(即机器人的工作环境)具有特定的类型。在这种方式下，通过了解机器人作业所处建筑的类型，可以选择正确的分类器。(这一过程)利用了两种不同类型的特征：一种是描述地点形状的特征，一种是表示建筑结构以及房间与环境其它部分之间关联的特征。当然，为了获得这些信息，必须事先了解建筑物的情况。在[62]中，作者提出了一个有趣的思路来增加典型室内拓扑地图的语义信息。在这项工作中，考虑了室内区域的基本类型，如地点(即房间等)和过渡点(即门等)，以完成对环境的语义分割。

<img src="https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105655503.png" alt="image-20210910105655503" style="zoom:50%;" />

<center>Fig.14. (a)根据推理类型(单/多(线索))和运行环境(室内/室外)对各种方法所做的划分图示，以及(b)根据推理类型(单/多(线索))和是否涉及拓扑地图或时间一致性对各种方法所做的划分图示</center>

(对前文)所提及的方法按照推理类型和操作环境(所作)的分类(结果)，以及按照推理类型和时间一致性或拓扑地图的存在性(所作)的分类(结果)，分别如Fig.14(a)和(b)所示。

### 四、应用

​       如何将语义地图用于实践呢？本节打算回顾迄今为止报告过的应用领域。正如前文所概述的那样，语义建图的主要目的是为机器人提供人类可以理解的描述。然而，为了在移动机器人任务中包含人类(的交互)，应该将远程信息高效地呈现给人类。本节分析的各种工作都希望从不同角度涵盖这一方面。此外，在同一节中，我们还分析了在涉及人类和机器人的几个集成框架中是如何应用语义建图的。与语义地图相结合的知识表示模式，可以实现高效的任务规划、路径规划和导航。

#### 4.1 环路中的人

![image-20210910105832037](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105832037.png)

<center>Fig.15. 混合现实3D显示的视图：(a)视距缩小，以支持自我为中心的任务如导航和目标识别；(b)视距放大，以支持以外部为中心的任务，如地点识别和全局规划[26]</center>

​		当人类操作员进入语义地图环路时，要么是为了通过指示物体或地点来增强地图构建过程，要么是为了得到机器人的帮助来找到地点或物体。在第一种情况下，Nieto-Granda等[56]提出了一种将空间自动识别和分类为不同语义区域的技术，从而生成环境的语义地图。在这项技术中，语义标签和空间区域之间的关系是基于人类增强建图[89]的，它(指人类增强建图)提供了与用户对周围环境的看法相关的区域分割，也提供了对这些区域之间过渡/转换的检测。指定区域的设置是交互式的，为空间分割和定位提供了独特性。证明语义建图符合HRI(要求)的一个明确例子是[4]中的工作，其中使用移动机器人绘制了人造室内环境的概念表示。更具体地说，它引入了一个情景对话，这是一个使机器人能够与人类进行自然语言对话[99]的功能。该系统使用组合类别语法(CCG)解析器来解释口语。后者由情景对话功能处理，它(指情景对话功能)能从言语行为的角度考察前面提及的对象、事件，以及之前的话语。此外，在[100]中提出了一种人机协作方法，旨在提取人类操作员所指示的对象的3D形状。出于同样的精神，Trevor等[101]引入了一个语义建图框架，该框架增加了HRI属性。它研究了应该理解人类命令来完成取物任务的服务机器人的情况。用户通过标记被检测的表面来辅助构建这样的语义地图。另一方面，Dayoub等[102]为服务机器人提出了一种基于对象的语义记忆，它增强了拓扑和度量地图。这项工作的总体目标是给机器人提供一种帮助人类的方式，这种方式给出了地图上特定物体的最可能位置。Nielsen等[26]使用了同样的概念，引入了一种快照技术作为获取真实世界图像并将它们存入语义地图的工具，其中语义地图依托于占用网格。此外，地图采用混合现实3D接口绘制，该接口可以将机器人环境中的真实元素与虚拟元素相结合，这使得可以以一种直观的显示来展现，如Fig.15所示。Zender等[4]提出了一个用于生成结构化环境的概念表示的集成系统。该表示具有不同的抽象层级，每个抽象层级所需的信息来源于不同的(感知)模式，包括激光传感器、相机和自然语言处理系统。该系统适用于高层级的人机通信和概念表示。此外，在[103]中作者利用了所谓的自治城市探索机器人对城市环境进行语义导航。这项工作应用了一些属性，如室外定位，可通过性评估，路径规划，行为选择和拓扑抽象。利用诸如激光扫描仪和立体相机之类的传感器分别进行度量建图和对周围环境的感知。机器人保留了一个额外的人机交互行为模型，根据该模型，行为选择模块负责根据当前情况选择合适的导航行为。在欧洲项目Viewfinder[104,105]中，分析并实现了室内和室外地图(构建)的几种方法，其中用到了多种(感知)模式，包括立体视觉、激光扫描仪和嗅觉传感器。该项目的总体目标是利用机器人系统在火灾后检查地面安全并收集视觉和化学数据，以协助急救人员。因此，构建的2D和3D度量地图是用化学传感器的结果以及受害者检测算法的输出标注的。生成的语义地图通过基站的复杂人机界面(HMI)提供给救援队，如Fig.16所示。

![image-20210910105909840](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105909840.png)

<center>Fig.16. 可以让机器人生成的语义地图服务于消防队搜救行动的HMI</center>

#### 4.2. 与知识表示形式的关联

​       知识表示形式以一种机器人可以用来解决复杂任务的方式来表示关于世界的信息[106]。因此很显然，语义地图是理想的结合对象。Wyatt等[107]认为，为了以真正自主的方式学习，人造智能体需要的一个基本属性是对周围环境进行语义解释。这项工作包括对特定种类知识的空缺和不确定性的表示，以及用于设定和实现学习目标的目标管理与规划系统。Lim等[108]提出了一种基于实体的集成知识框架，它将低层级数据和高层级知识放在一起。它由知识描述和知识关联部分组成，如Fig.17(a)所示。知识描述部分由嵌入在度量和语义地图中的知识组成，而知识关联则使用了逻辑推理、贝叶斯推理和启发式(方法)，这使得机器人能够解决大部分问题。Fig.17(b)展示了某实验空间下，实体模式和实体实例层如何与语义地图结合的例子。此外，Bouguerra等[109]在知识表示形式中选择了描述逻辑来表示语义领域的信息。语义知识关注对象及其属性，以及它们与其他对象的关系。虽然只对有限的知识进行了编码，但文章证明了语义知识适用于监控过程。Tenorth等[110]通过将识别对象与从大型、公开知识库中获得的广博和常识性知识连接起来，提出了一种进一步增强生成的语义地图的方法。以实体结构组织的知识，为机器人提供了关于对象是什么、它们可以用于干什么以及如何去使用它们的信息。在另一种情况下，Finucane等[111]利用线性时序逻辑任务规划工具包设计了高级机器人控制器。该工具包包括结构化英语和线性时序逻辑，适合开发高层级反应性任务规范，该规范可转化为能直接用于真实机器人的正确机器人控制器。此外，该工作还计划在不久的将来与ROS框架集成，以实现与带机械臂腿型机器人的对接。在[112]中，作者讨论了将自然语言命令解析为动作和控制结构这一问题的解决方案，其中这些动作和控制结构可以很容易地在机器人执行系统中实现。该方法基于由英文指令和对应的控制语言表达式构成的示例对来记忆解析器。为了实现这一尝试，作者将由机器人感官输入感知到的语义属性转换为二进制特征，最终得到逻辑表达式。Liu和von Wichert[60]提出了一种生成所感知环境的参数化抽象模型的方法。此外，特定任务的上下文知识被定义为马尔可夫逻辑网络中的描述性规则，其依赖于预定义的抽象术语(如“类型”、“关系”等)。利用相应的推理结果来建立事前分布，从而为语义地图的解空间添加合理约束。此外，所采用的语义注释传感器模型能够对对传感器数据的上下文信息进行解释。最近，Heintz[113]为基于语义的时序流推理提出了一个实用框架。通过时序逻辑公式的系统递进实现了增量式推理。通过实体方式建立的语义推理，可以支持推理和多机器人系统语义建图。

<img src="https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910105949333.png" alt="image-20210910105949333" style="zoom: 67%;" />

![image-20210910110000986](https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910110000986.png)

<center>Fig.17. (a)[108]中系统的三个组成部分，即知识描述、知识关联和应用；(b)特定地点语义地图的实体模式和实例</center>

#### 4.3. 规划与导航

​       语义地图被用于解决移动机器人(面临)的实际问题，包括规划与导航。特别地，Borkowski等[114]从激光扫描仪原始数据中提取语义特征，并将其用于分类对象和构建建筑物内部的语义地图。此外，提出了一种基于超图(hypergraph)的语义导航方案，展示了语义信息是如何从建筑物的数字模型中提取出来、从而为机器人导航提供便利的。另一方面，Galindo等[115]利用语义知识进行机器人任务规划。引入了一种特定的语义地图类型，其整合了分层空间信息和语义知识。在同一工作中还研究了这种地图提供的实现任务规划的能力，突出/强调了用非感知信息得到当前状态的能力、自动生成目标以维持特定条件的能力以及优化规划的方法。此外，在[116]中作者提出了一种从基于任务的人机对话中学习高层级概念的方法。该对哈系统包含一个将语音与物理环境中的位置联系起来的概率模型，一个获取机器人先验未知的知识的系统，以及一个存储所获取知识的知识库。通过让未经训练的人员与训练过的机器人进行交互来解决简单的规划和导航任务，对整个系统进行了评估。Liu等[117]指出，网络机器人系统应该通过基于网络的协作，将物理自主机器人、环境传感器和人机交互结合起来。为此，作者为网络机器人引入了一种协作服务框架，足以规划与人类概念兼容的任务。在一项更未来的工作中，作者在[118]中认同语义知识可以极大提高机器人的能力。关于事物应该是怎样的(即标称状态)信息已经以这种方式编码，从而使机器人能够推断出距离这些标称状态的偏差，并生成目标来纠正这些偏差。该全功能系统在单个移动机器人中集成了一系列创新，即语义建图方法、知识表示与推理实践、任务规划器以及感知与导航常规流程。

### 五、基准测试和验证数据集

​	   任何语义建图计算设置都构成一个由多个子模块组成的复杂系统。这种系统通常会保留越来越多的参数，这些参数会影响所采用方法的整体精度。已经说过，对各种现实数据集的需求是非常重要的，所设计的算法需要利用这些数据集实现开发和评估。此外，客观指标的建立处境很尴尬，我们应该记住，几乎不可能公平地比较在不同环境、不同条件和不同假设下设计、执行和评估的解决方案。因此，用于基准测试的真实世界数据集的开发是一条单行道。Wu等人[119]引入了一个名为VPC的一致性数据集，其适用于家庭环境中的视觉地点识别。在另一项工作[22]中，引入了一个免费的在线数据源，它能提供大量且数目不断增长的人工标记的视觉数据，其中包含了大量适用于地点记忆和对象识别的室内场景(数据)。此外，在[3]中提供了一个公开可用的数据集[120]，其数据是在大学环境中由移动机器人捕获的。通过安装在移动机器人上的RGB-D传感器，在多种照明条件下获得了这些数据。因此，它适用于SLAM和地点识别算法的评估。Pronobis等人[121]引入了两种不同的数据集，即INDECS和IDOL。INDECS由安装在三脚架上的标准相机从一组固定的点上拍摄的环境图像组成。另一方面，IDOL由两个装有透视相机的移动机器人平台记录的图像序列组成，因此很适合语义地图的实验和验证。一个适用于机器人定位和地点识别算法的评估，并且更加完整的数据集是COLD数据集[86]。这个特殊的数据集包含三个不同部分，这些部分是在三个不同实验室中采集的，而这三个实验室也分别坐落在三个不同的欧洲城市。在所有三个部分中使用的相机设置都是相同的，同时使用了共同安装在一个便携式插座上的透视相机和广角相机。这些序列是在不同天气和光照条件下采集的，时间跨度为2-3天。这个特定数据集非常适合评估视觉地点识别算法在动态、地理和类别变化方面的鲁棒性。该数据对社区也是免费的，可以在[122]中找到。至于室外场景，[123-125]的作者开发了一个名为KITTI的大规模基准套件。因为它包含了来自立体、光流、视觉里程计、3D对象检测和3D跟踪等方面的数据，所以适用于室外语义建图评估。在较小的规模上，Sengupta等人[69]向社区提供了一个14.8km的手工标记数据集，包含13种面向人类的概念，适用于室外语义建图。来自现有数据集的一个最小图片样本集如Fig.18所示。最后，在RobotVision@ImageCLEF[126,127]中可以找到大量用于语义建图方法评估的数据。解决多模态地点分类问题是一个巨大挑战。该挑战的目标是根据安装在移动机器人上的相机捕获的图像序列来对房间进行分类。

<img src="https://silencht.oss-cn-beijing.aliyuncs.com/img/image-20210910110109383.png" alt="image-20210910110109383" style="zoom: 50%;" />

<center>Fig.18. 第一行展示了来自Cognitive Navigation数据集的图像样本，第二行是来自COLD数据集的实例，第三行是来自KITTI数据集的室外图像</center>

### 六、开放性课题与难题

​	   大约十年前，在一项关于社会交互机器人的调查中[128]得出结论：让机器人与人类需求兼容、与应用需求匹配、变得易于理解、实现人们期望的交互舒适度是非常重要的。虽然在移动机器人领域引入语义建图已经缩小了(实现)所有这些方面的距离，但是仍有很长的路要走，仍有其他尚未解决的课题与难题需要回答，包括：

#### 6.1 一幅地图成为语义地图的最低标准是什么？

根据本文前面对现有技术的研究，为了将地图表征为语义地图，它必须具有几个关键属性。除了具备度量地图(2D或3D)外，语义地图还应该具有意义认知能力[3]。度量地图在拓扑地图方面的抽象是主要的，因为它将探索的环境组织为图。图的顶点可以同时保留几何特征和语义特征，例如所感知环境的标签，而边则揭示了检测到的地点之间的物理连通性[2]。

​	   除了这些最低标准之外，还可以利用地点、形状或物体识别算法作为可能出现的有利因素，以帮助机器人以一种与人类兼容的方式理解周围的环境，前提是这些有利因素可以被适当地整合到地图中。此外，时序关联的体现也可以增强智能体将探索环境正确区分为(相应)地点的能力[78]。此外，多(感知)模式的利用和人类主张(assertion)可能会导致构建出足够鲁棒的语义地图，能让下一代机器人在任何环境中作业。

#### 6.2 如何评估语义建图方法？

​	   考虑到语义地图是一个复杂的系统，是否存在对该系统性能的唯一评估方法尚不明确。然而，可以分别评估每个子模块。例如，当涉及室外场景时，可以类似[129]中的做法，将真值(由差分GPS测得)与视觉里程计组件(估计)的轨迹进行比较来评估相应度量建图的精度。对于室内场景，直接将生成的度量地图与建筑物的CAD模型进行比较，就可以提供充足的性能量化。地点和对象识别算法可以在有标记的数据集上评估(参见第5节),其性能可以通过经典的精度召回方法或者ROC曲线进行评估。然而，对这些方法的评估也取决于所使用的分类方法。检验识别(算法)实践性能的另一种常用技术是混淆矩阵，它通常能够反映所检验方法关于标准差的平均性能。

#### 6.3 语义建图方法和地点识别方法的区别是什么？

​	   有必要指出的是，语义建图系统可能会附加有地点识别系统。然而，有些地点识别方法只关注从一组随机放置的图像中回忆(出是哪个)地点。这和语义建图非常不同，在语义建图中，关于访问地点的各种推理会受制于空间约束。例如，我们可以考虑[8]中描述的工作，其中作者仅仅解决了地点识别问题，而在[48]提出的工作中，将地点识别能力集成到一个移动机器人上，以在室内环境中识别地点和(各种)语义类别。此外，在语义建图期间，会考虑机器人的运动来辅助地点识别模块。当机器人从一个位置移动到另一个位置时，系统应该能准确地识别出学习过的地点实例。后者需要采用能够处理探索环境中的任何动态变化的鲁棒机器学习技术。然而，一个语义建图系统也应该具备地点分类能力，即不仅要精通不同地点的辨识，还要精通(不同地点的)分类。为此，机器人应该能对没有可用先验知识的地点进行分类并生成标签[3]。因此，系统应该能将探索某一特定地点获得的知识泛化/一般化，以便于推理任何其他类似地点的语义内容。

#### 6.4 语义地图的潜在应用领域是什么？

​	   通过这项研究可以明显看出，语义地图最初是为家用机器人发明的，如机器人伴侣或运动辅助机器人，作为一种便利HRI的手段[4]。但是，这个领域的快速发展以及目前为止提出的几个实现解决方案，揭示了大量其它应用领域，如下所述。在未来的工厂中，劳动者将与机器人密切协作，因此，工作室/车间的一个有意义的表示(指标)应该是能使这种(人机)协作高效。同样的原则也适用于未来的仓库，届时仓库中的自动导引车(AGV)需要配备语义建图功能。当适当的传感器被用于表示地图时(例如嗅觉、化学、二氧化碳等)，结果可以适用于搜救行动，在该过程中搜救人员将与机器人密切协作。在室外场景中，对于即将到来的无人驾驶汽车而言，环境的语义表示是使乘客的体验更顺畅(例如，给汽车发送类似“在牛排馆左转”这样的指令)的关键。农业机器人是另一个应用领域，其中，未来的农民不需要成为程序员就能和他/她的机器人进行交流，比如要求机器人“穿过果园和锄葡萄园”。因此，前面提到的例子清晰地表明，任何需要人-机协作的领域都将受益于语义建图技术。

#### 6.5 语义地图是如何辅助知识表示的？反过来呢？

​	   实体和其他知识表示模式可以完整地描述机器人的周围环境，编码和揭示属性，即使当这些属性不可感知时[108,115]。从这个意义上说，语义地图确实可以得到这种形式(即各种知识表示模式)的支持，因为后者(即各种知识表示模式)首先允许了地图中对各种实例进行信息更丰富的表示(即因为有了各种知识表示模式，所以我们才能在地图中用信息更丰富的表示方式来描述各种实例)。另一方面，语义地图通常识别对象、地点和其他类，并将它们放入一个按空间组织的层次结构中。因此，高效的语义建图可以提供维护个体最新空间属性的方法。这是最重要的一点，因为被组织成某种知识表示形式的客观世界对象会受环境不断变化的影响(因此找到一种知识的维护更新方法就至关重要，而语义地图正好提供了这一功能)，这是机器人和人类都应该意识到的。

#### 6.6 研究难题和未来趋势是什么

​	   未来研究工作的一个挑战是，社区甚至是市和县识别级别的大规模室外场景语义建图。然而，这样的尝试要求存在大量的数据来训练所有模型。解决这个问题的一个办法是利用每个人都和网络相连接这一事实，基于云技术来促进位于地球不同地点的机器人和人类之间的知识交流。通过这种方式，人工智能体将能够和其他人工智能体以及人类交换视觉或其他形式的记忆。为了实现这一点，语义建图只是拼图的一小部分；云机器人、社交媒体、物联网、社交机器人等技术需要整合进某种统一的主流技术。

### 七、结语

​	   从该方向已经做出的大量研究可以看出，语义建图是一个活跃且在不断发展的研究领域。尽管这是一个相对较新的感兴趣话题，但近年来它的各个方面都已出现。本综述旨在对现有方法进行总结和分类。据此，对语义地图的主要特征进行了概述和聚类，分别对应所使用度量地图的可扩展性、拓扑地图的使用、感知类型以及时间一致性。此外，还回顾和讨论了语义地图可能具有的其它特征。综上所述，可能有人已经发现，现有的大多数方法都希望解决室内环境下的(语义建图)问题，而不是室外环境。这通常是由于室内环境被人类更好地进行了组织和决定。室内语义建图的一个重要方面是进行地点和对象识别，这在室外仍然是禁止的。尽管如此，仍然发表了很多用于室外场景的研究，这些研究集中在对道路、行人、信号、可通过性等的场景分析方面。出现在许多工作中的另一个重要属性是拓扑地图，通过它可以将所探索环境以一种抽象的方式组织起来，特别是以图的形式。这种策略的一个显著优势减轻了计算负担，这是由于视觉记忆的检索和回忆是分层地而不是详尽地进行的。时间一致性在语义建图中也是非常重要的，因为它利用了机器人的运动来确定探索点之间的物理约束过渡。





### 本文来源：修补自《从零开始学习SLAM》 知识星球，作者：细雨花坊